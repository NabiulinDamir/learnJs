<div class="p-1">
  <div class="d-flex justify-content-between mb-1">
    <h5>{{ (type() == 'income') ? 'Доходы' : 'Расходы'}}</h5>
    <div class="d-flex gap-1">
      @if(selectedOperations.length){ 
        <button type="button" class="btn btn-secondary btn-sm" (click)="selectedOperations = []"> Сбросить </button>
        <button type="button" class="btn btn-danger btn-sm" (click)="deleteModal.show()"> Удалить </button>
      }
      <button type="button" class="btn btn-primary btn-sm" (click)="createModal.show(); createIncomeForm.setDefault()"> Добавить </button>
    </div>
  </div>

  <my-table class="w-100" 
    [allData]="(type() == 'income') ? this.localStorage.incomeOperations : this.localStorage.expensOperations"
    [(selectedData)]="selectedOperations"
    (onEditDataClick)="
      editModal.show();
      editIncomeForm.setValue($event.value);
      editIncomeForm.setCategory($event.category);
      editIncomeForm.setDate($event.date);
      tmpEditOperationKey = $event.id"
  > </my-table>
</div>

<!-- //////////////////////////////////////////// -->

<my-modal
  #createModal
  (deny)="createModal.hide()"
  (confirm)="createIncomeForm.submit()"
  [title]="'Добавить ' + ((type() == 'income') ? 'доход' : 'расход')"
  [isLoaded]="modalIsLoad"
>
  <my-form
    #createIncomeForm
    [selectorItems]="formatToStringArr((type() == 'income') ? this.localStorage.incomeCategories : this.localStorage.expensCategories)"
    (onSubmit)="createOperation($event); "
  ></my-form>
</my-modal>

<!-- //////////////////////////////////////////// -->

<my-modal
  #editModal
  (deny)="editModal.hide()"
  (confirm)="editIncomeForm.submit()"
  [title]="'Редактировать ' + ((type() == 'income') ? 'доход' : 'расход')"
  [isLoaded]="modalIsLoad"
>
  <my-form
    #editIncomeForm
    [selectorItems]="formatToStringArr((type() == 'income') ? this.localStorage.incomeCategories : this.localStorage.expensCategories)"
    (onSubmit)="updateOperation($event);"
  ></my-form>
</my-modal>

<!-- //////////////////////////////////////////// -->

<my-modal
  #deleteModal
  (deny)="deleteModal.hide()"
  (confirm)="deleteSelectedOperations()"
  title="Удалить операции"
>
  Вы действительно хотите удалить выбранные ({{ selectedOperations.length }}) операций?
</my-modal>